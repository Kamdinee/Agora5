{% extends "base.html.twig" %}

{% block central %}
<div class="col-sm-8">
   <section class="panel">
      <div class="chat-room-head">
         <h3><i class="fa fa-angle-right"></i> Gérer les plateformes</h3>
      </div>
      <div class="panel-body">
         <table class="table table-striped table-advance table-hover">
         <thead>
           <tr class="tableau-entete">
            <th>Identifiant</th>
            <th>Libellé</th>
            <th></th>
           </tr>
         </thead>
         <tbody>
         <tr>
         <form action="{{ path('plateformes_ajouter') }}" method="post">
            <td>Nouveau</td>
            <td>
               <input type="text" id="txtLibPlateforme" name="txtLibPlateforme" size="24" required minlength="2" maxlength="50" placeholder="Libellé" />
            </td>
            <td>
               <button class="btn btn-primary btn-xs" type="submit" title="Enregistrer nouveau"><i class="fa fa-save"></i></button>
            </td>
         </form>
         </tr>

       {% for key, p in tbPlateformes %}
         <tr>
         {% if p.identifiant != idPlateformeModif %}
         <form action="{{ path('plateformes_demandermodifier') }}" method="post" style="display:inline;">
            <td>{{ p.identifiant }}<input type="hidden"  name="txtIdPlateforme" value="{{ p.identifiant }}" /></td>
            <td>{{ p.libelle }}</td>
            <td>
               <button class="btn btn-primary btn-xs" type="submit" title="Modifier"><i class="fa fa-pencil"></i></button>
            </td>
         </form>
         <form action="{{ path('plateformes_supprimer') }}" method="post" style="display:inline;">
            <input type="hidden" name="txtIdPlateforme" value="{{ p.identifiant }}" />
            <td style="display:none;"></td><td style="display:none;"></td><td style="display:none;"></td>
            <td>
               <button class="btn btn-danger btn-xs" type="submit" title="Supprimer" onclick="return confirm('Voulez-vous vraiment supprimer cette plateforme ?');"><i class="fa fa-trash-o "></i></button>
            </td>
         </form>
         {% else %}
         <form action="{{ path('plateformes_validermodifier') }}" method="post">
            <td>{{ p.identifiant }}<input type="hidden"  name="txtIdPlateforme" value="{{ p.identifiant }}" /></td>
            <td><input type="text" id="txtLibPlateforme" name="txtLibPlateforme" size="24" required value="{{ p.libelle }}" /></td>
            <td>
               <button class="btn btn-primary btn-xs" type="submit" title="Enregistrer"><i class="fa fa-save"></i></button>
               <a class="btn btn-warning btn-xs" href="{{ path('plateformes_afficher') }}" title="Annuler"><i class="fa fa-undo"></i></a>
            </td>
         </form>
         {% endif %}
         </tr>
         {% endfor %}
         </tbody>
        </table>
      </div>
    </section>
</div>
{% endblock %}